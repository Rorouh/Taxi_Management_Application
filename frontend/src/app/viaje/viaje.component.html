<h2>{{ titulo }}</h2>

<!-- Info básica del viaje -->
<ul *ngIf="viaje?.pedido">
  <li><b>Origen:</b> {{ viaje.pedido.origen.calle }} – {{ viaje.pedido.origen.localidad }}</li>
  <li><b>Destino:</b> {{ viaje.pedido.destino.calle }} – {{ viaje.pedido.destino.localidad }}</li>
  <li><b>Nº personas:</b> {{ viaje.pedido.numPersonas }}</li>
  <li><b>Distancia:</b> {{ viaje.pedido.confort }}</li>
  <li><b>Distancia prevista:</b> {{ viaje.pedido.distancia }} km</li>
  <li><b>Precio estimado:</b> {{ viaje.precio }} €</li>
</ul>

<!-- Si el cliente ya aceptó pero no hemos empezado -->
<div *ngIf="!esperandoCliente && !viajeEnCurso && !viajeTerminado">
  <button (click)="iniciarViaje()">Iniciar viaje</button>
</div>

<!-- Durante el viaje: permitimos introducir retraso y finalizar -->
<!-- durante el viaje -->
<div *ngIf="viajeEnCurso && !viajeTerminado">
  <label>
    Minutos de retraso:
    <input
      type="number"
      min="0"
      [(ngModel)]="delayMinutes"
    />
  </label>
  <button type="button" (click)="aplicarRetraso()">
    Aplicar retraso
  </button>
  <button
    class="terminar"
    (click)="finalizarViaje()"
  >
    Finalizar viaje
  </button>
</div>


<!-- Una vez finalizado -->
<div *ngIf="finalizado">
  <p><b>Precio final:</b> {{ viaje.precio }} €</p>
</div>

<!-- Mensaje de confirmación definitiva -->
<p class="ok" *ngIf="viajeTerminado">
  El viaje se registró en la base de datos. ¡Buen trabajo!
</p>
